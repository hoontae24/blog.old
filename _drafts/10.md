---
layout: post
title: AWS EC2 + RDS(Mysql)에 Node.js 서버 배포하기
# subtitle:
permalink: "/posts/:title"
author: Hoontae
categories: AWS
tags: AWS EC2 RDS Node Mysql
background: /img/posts/aws/aws_node.png
featured: true
hidden: false
comments: true
---

보통의 웹 서비스는 서버를 이용하여 서비스를 제공합니다. 서버 컴퓨터를 직접 구성해서 할 수도 있지만, 요즘에는 클라우드 서비스를 많이 이용합니다. 클라우드 서비스를 이용하면 물리적으로 서버를 직접 구성하거나 가지고 있지 않아도 되고, 내가 사용할 서비스에만 집중하여 서버를 운영할 수 있습니다. 이번 포스트에서는 대표적인 클라우드 컴퓨팅 서비스 중 하나인 Amazon Web Service(AWS)를 이용하여 Node.js 서버를 배포해보겠습니다.

웹 서비스는 다음과 같이 구성됩니다.

- Node.js 웹 어플리케이션
- AWS EC2와 Ubuntu (+ nginx 프록시)
- AWS RDS와 Mysql

우리가 만든(미리 만들어둔) 웹 어플리케이션을 EC2의 Ubuntu에 구성할 것입니다. 그리고 서비스에 사용될 데이터베이스는 RDS의 Mysql 서버를 구성할 것입니다.

---

### 0. Node.js 웹 어플리케이션 준비하기

우리의 웹 서비스가 실제로 동작할 웹 어플리케이션이 필요합니다. 여기서는 Node.js 웹 어플리케이션을 사용할 것인데, 간단한 Node.js REST Api 서버를 만듭니다. _(Node.js 어플리케이션에 대한 부분은 자세히 다루지 않습니다.)_

저는 미리 준비한 Node 앱을 가져오겠습니다. 먼저 로컬에 설치해서 잘 동작하는 지 확인해볼게요.

```bash
$ git clone https://github.com/hoontae24/simple-node-server.git

$ cd simple-node-server

$ npm run build
```

빌드가 완료되면 서버를 시작합니다. 저는 pm2를 이용해서 서버를 구동시키겠습니다.

```bash
$ pm2 start server.json
```

서버가 시작되었으면, 브라우저에서 요청을 보내어 동작을 확인해봅니다.

![사진]()

![사진]()

---

### 1. EC2 서버 구성하기

EC2(Amazon Elastic Compute Cloud)는 클라우드에서 컴퓨팅 서비스를 이용할 수 있도록 해줍니다. AWS에서 인스턴스를 만들고, SSH로 원격 연결을 통해 서버 컴퓨터를 제어할 수 있습니다.

#### 1.1 EC2 인스턴스 만들기

AWS로 가서 EC2 인스턴스를 만들어 봅시다. [EC2 Management Console](https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2)에 들어가서 `인스턴스 시작`을 선택합니다.
